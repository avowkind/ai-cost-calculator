(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{401:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>S});var a=n(5155),s=n(2115);let o={primary:"#299e9e",primaryDark:"#217a7a",primaryLight:"#4ccfcf",white:"#ffffff",textOnPrimary:"#ffffff",summaryBg:"#f3fafd",summaryAccent:"#299e9e",summaryText:"#1a2e2e"};var i=n(6766);let r=e=>{let{onExportSettings:t,onExportResults:n,onReset:s}=e;return(0,a.jsx)("header",{style:{background:"linear-gradient(90deg, ".concat(o.primary," 0%, ").concat(o.primaryDark," 100%)"),color:o.textOnPrimary},className:"text-white p-4 shadow-md",children:(0,a.jsxs)("div",{className:"container mx-auto flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(i.default,{src:"/totara_logo.svg",alt:"Totara Logo",width:64,height:64,className:"mr-5",priority:!0}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Totara LMS AI Cost Calculator"}),(0,a.jsx)("p",{className:"text-sm opacity-80",children:"Evaluate costs for AI model usage across different AI Interactions"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:n,style:{backgroundColor:o.primary,color:o.textOnPrimary},className:"px-4 py-2 rounded-md hover:opacity-90 focus:outline-none focus:ring-2",children:"Export Results"}),(0,a.jsx)("button",{onClick:t,style:{backgroundColor:o.primary,color:o.textOnPrimary},className:"px-4 py-2 rounded-md hover:opacity-90 focus:outline-none focus:ring-2",children:"Export Settings"}),(0,a.jsx)("button",{onClick:s,style:{backgroundColor:"#e74c3c",color:o.textOnPrimary},className:"px-4 py-2 rounded-md hover:opacity-90 focus:outline-none focus:ring-2",children:"Reset"})]})]})})},l=e=>{let{adminCount:t,userCount:n,daysPerMonth:s,selectedGlobalModel:o,modelProviders:i,onAdminCountChange:r,onUserCountChange:l,onDaysPerMonthChange:c,onGlobalModelChange:m}=e,d=i.flatMap(e=>e.models.map(t=>({id:t.id,name:"".concat(e.name," - ").concat(t.name)})));return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Global Settings"}),(0,a.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsx)("label",{htmlFor:"adminCount",className:"block text-sm font-medium text-gray-700",children:"Admin Count"}),(0,a.jsx)("input",{type:"number",id:"adminCount",min:"1",value:t,onChange:e=>r(parseInt(e.target.value)||1),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsx)("label",{htmlFor:"userCount",className:"block text-sm font-medium text-gray-700",children:"User Count"}),(0,a.jsx)("input",{type:"number",id:"userCount",min:"1",value:n,onChange:e=>l(parseInt(e.target.value)||1),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsx)("label",{htmlFor:"daysPerMonth",className:"block text-sm font-medium text-gray-700",children:"Working Days per Month"}),(0,a.jsx)("input",{type:"number",id:"daysPerMonth",min:"1",max:"31",value:s,onChange:e=>c(parseInt(e.target.value)||22),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsx)("label",{htmlFor:"globalModel",className:"block text-sm font-medium text-gray-700",children:"Default AI Model"}),(0,a.jsx)("select",{id:"globalModel",value:o,onChange:e=>m(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:d.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})]})]}),(0,a.jsx)("p",{className:"mt-4 text-sm text-gray-500",children:"These settings will be applied globally across all interactions unless overridden."})]})},c=e=>{let{interaction:t,modelProviders:n,selectedModel:i,globalModelName:r,requests:l,activeUsers:c,tokens:m,enabled:d,activeUsersMode:u,onToggleEnabled:p,onModelChange:x,onRequestsChange:g,onActiveUsersChange:h,onActiveUsersModeChange:y,onTokensChange:f}=e,[b,C]=(0,s.useState)(null),[v,N]=(0,s.useState)({min:0,max:0,base:0}),j=n.flatMap(e=>e.models.map(t=>({id:t.id,name:"".concat(e.name," - ").concat(t.name),perImageCost:t.perImageCost}))),k="image-generation"===t.id?j.filter(e=>"number"==typeof e.perImageCost&&e.perImageCost>0):j,w="image-generation"===t.id?k:[{id:"default",name:"Default: ".concat(r)},...k],S=m.input||{min:0,max:0},T=m.output||{min:0,max:0},M="admin"===u||"user"===u,I=e=>{var t,n,a,s;C(e),N({min:null!=(a=null==(t=m.input)?void 0:t.min)?a:0,max:null!=(s=null==(n=m.input)?void 0:n.max)?s:0,base:"number"==typeof m.base?m.base:0})},A=(e,t)=>{N(n=>({...n,[e]:t}))},U=e=>{"base"===e?f(t.id,"base",v.base):f(t.id,e,v.min,v.max),C(null)};return(0,a.jsxs)("div",{className:"rounded-lg shadow-md mb-4 bg-white",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-t-lg px-5 py-3 transition-opacity ".concat(d?"":"opacity-60"),style:{backgroundColor:o.primary},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:t.name}),(0,a.jsx)("p",{className:"text-sm",style:{color:o.textOnPrimary,opacity:.85},children:t.description})]}),(0,a.jsxs)("label",{className:"flex items-center cursor-pointer ml-4",children:[(0,a.jsx)("input",{type:"checkbox",checked:d,onChange:p,className:"sr-only"}),(0,a.jsx)("div",{className:"w-11 h-6 flex items-center rounded-full p-1 duration-300 ease-in-out ".concat(""),style:{backgroundColor:d?o.primaryDark:o.primaryLight},children:(0,a.jsx)("div",{className:"bg-white w-4 h-4 rounded-full shadow-md transform duration-300 ease-in-out ".concat(d?"translate-x-5":"")})})]})]}),(0,a.jsxs)("div",{className:"p-5 transition-opacity ".concat(d?"":"opacity-60 pointer-events-none"),children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"model-".concat(t.id),className:"block text-sm font-medium text-gray-700",children:"AI Model"}),(0,a.jsx)("select",{id:"model-".concat(t.id),value:i,onChange:e=>x(e.target.value),className:"block w-full px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 h-[42px]",children:w.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{htmlFor:"requests-".concat(t.id),className:"block text-sm font-medium text-gray-700",children:["daily"===t.usage.requestType?"Daily":"Monthly"," Requests"]}),(0,a.jsx)("input",{type:"number",id:"requests-".concat(t.id),min:"0",value:l,onChange:e=>g(parseInt(e.target.value)||0),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"users-".concat(t.id),className:"block text-sm font-medium text-gray-700",children:"Active Users"}),(0,a.jsxs)("div",{className:"flex flex-col items-start gap-0",children:[(0,a.jsx)("input",{type:"number",id:"users-".concat(t.id),min:"1",value:c,onChange:e=>h(parseInt(e.target.value)||1),disabled:M,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ".concat(M?"bg-gray-100":"")}),(0,a.jsxs)("div",{className:"flex flex-row items-center gap-2 mt-2",children:[(0,a.jsxs)("label",{className:"flex items-center text-xs cursor-pointer select-none",children:[(0,a.jsx)("input",{type:"radio",name:"activeUsersMode-".concat(t.id),checked:"admin"===u,onChange:()=>y("admin"),className:"mr-1"}),"Admin"]}),(0,a.jsxs)("label",{className:"flex items-center text-xs cursor-pointer select-none",children:[(0,a.jsx)("input",{type:"radio",name:"activeUsersMode-".concat(t.id),checked:"user"===u,onChange:()=>y("user"),className:"mr-1"}),"User"]}),(0,a.jsxs)("label",{className:"flex items-center text-xs cursor-pointer select-none",children:[(0,a.jsx)("input",{type:"radio",name:"activeUsersMode-".concat(t.id),checked:"custom"===u,onChange:()=>y("custom"),className:"mr-1"}),"Active"]})]})]})]})]}),(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Instruction Tokens"}),"base"===b?(0,a.jsx)("div",{className:"flex items-center mt-1",tabIndex:-1,onBlur:e=>{let t=e.relatedTarget;t&&"INPUT"===t.tagName||U("base")},children:(0,a.jsx)("input",{type:"number",className:"w-20 px-1 py-0.5 border border-gray-300 rounded",value:v.base,onChange:e=>A("base",parseInt(e.target.value)||0),onKeyDown:e=>{"Enter"===e.key&&U("base")},autoFocus:!0})}):(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1 cursor-pointer hover:bg-gray-200 rounded px-1 inline-block",onClick:()=>I("base"),title:"Click to edit base tokens",children:"number"==typeof m.base?m.base:0})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md md:col-span-1",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Input Tokens"})}),"input"===b?(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",tabIndex:-1,onBlur:e=>{let t=e.relatedTarget;t&&"INPUT"===t.tagName||U("input")},children:[(0,a.jsx)("input",{type:"number",className:"w-16 px-1 py-0.5 border border-gray-300 rounded",value:v.min,onChange:e=>A("min",parseInt(e.target.value)||0),onKeyDown:e=>{"Enter"===e.key&&U("input")},autoFocus:!0}),(0,a.jsx)("span",{children:"-"}),(0,a.jsx)("input",{type:"number",className:"w-16 px-1 py-0.5 border border-gray-300 rounded",value:v.max,onChange:e=>A("max",parseInt(e.target.value)||0),onKeyDown:e=>{"Enter"===e.key&&U("input")}})]}):(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1 cursor-pointer hover:bg-gray-200 rounded px-1 inline-block",onClick:()=>I("input"),title:"Click to edit input token range",children:["Range: ",S.min," - ",S.max]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md md:col-span-1",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Output Tokens"})}),"output"===b?(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",tabIndex:-1,onBlur:e=>{let t=e.relatedTarget;t&&"INPUT"===t.tagName||U("output")},children:[(0,a.jsx)("input",{type:"number",className:"w-16 px-1 py-0.5 border border-gray-300 rounded",value:v.min,onChange:e=>A("min",parseInt(e.target.value)||0),onKeyDown:e=>{"Enter"===e.key&&U("output")},autoFocus:!0}),(0,a.jsx)("span",{children:"-"}),(0,a.jsx)("input",{type:"number",className:"w-16 px-1 py-0.5 border border-gray-300 rounded",value:v.max,onChange:e=>A("max",parseInt(e.target.value)||0),onKeyDown:e=>{"Enter"===e.key&&U("output")}})]}):(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1 cursor-pointer hover:bg-gray-200 rounded px-1 inline-block",onClick:()=>I("output"),title:"Click to edit output token range",children:["Range: ",T.min," - ",T.max]})]})]})]})]})},m=JSON.parse('[{"id":"openai","name":"OpenAI","models":[{"id":"gpt-4-1","name":"GPT-4.1","inputCost":0.002,"cachedInputCost":0.0005,"outputCost":0.008},{"id":"gpt-4-1-mini","name":"GPT-4.1 mini","inputCost":0.0004,"cachedInputCost":0.0001,"outputCost":0.0016},{"id":"gpt-4-1-nano","name":"GPT-4.1 nano","inputCost":0.0001,"cachedInputCost":0.000025,"outputCost":0.0004},{"id":"gpt-4o","name":"GPT-4o","inputCost":0.005,"outputCost":0.015},{"id":"gpt-4-turbo","name":"GPT-4 Turbo (8k)","inputCost":0.01,"outputCost":0.03},{"id":"gpt-4-turbo-128k","name":"GPT-4 Turbo (128k)","inputCost":0.01,"outputCost":0.03},{"id":"openai-o3","name":"OpenAI o3","inputCost":0.01,"cachedInputCost":0.0025,"outputCost":0.04},{"id":"gpt-4","name":"GPT-4 (8k)","inputCost":0.03,"outputCost":0.06},{"id":"gpt-4-32k","name":"GPT-4 (32k)","inputCost":0.06,"outputCost":0.12},{"id":"gpt-3.5-turbo","name":"GPT-3.5 Turbo (4k)","inputCost":0.0005,"outputCost":0.0015},{"id":"gpt-3.5-turbo-16k","name":"GPT-3.5 Turbo (16k)","inputCost":0.0005,"outputCost":0.0015},{"id":"dall-e-3","name":"DALL-E 3 (Standard)","inputCost":0,"outputCost":0,"perImageCost":0.04},{"id":"dall-e-3-hd","name":"DALL-E 3 (HD)","inputCost":0,"outputCost":0,"perImageCost":0.08},{"id":"gpt-image-1","name":"GPT-Image-1","inputCost":0,"outputCost":0,"perImageCost":0.04},{"id":"text-embedding-3-large","name":"Text Embedding 3 Large","inputCost":0.00013,"outputCost":0}]},{"id":"anthropic","name":"Anthropic","models":[{"id":"claude-3-7-sonnet","name":"Claude 3.7 Sonnet","inputCost":0.003,"outputCost":0.015,"promptCachingWrite":0.00375,"promptCachingRead":0.0003},{"id":"claude-3-5-haiku","name":"Claude 3.5 Haiku","inputCost":0.0008,"outputCost":0.004,"promptCachingWrite":0.001,"promptCachingRead":0.00008},{"id":"claude-3-opus","name":"Claude 3 Opus","inputCost":0.015,"outputCost":0.075,"promptCachingWrite":0.01875,"promptCachingRead":0.0015}]},{"id":"aws-bedrock","name":"AWS Bedrock","models":[{"id":"mistral-large","name":"Mistral Large","inputCost":0.008,"outputCost":0.024},{"id":"mistral-small","name":"Mistral Small","inputCost":0.002,"outputCost":0.006}]},{"id":"stable-diffusion","name":"Stable Diffusion","models":[{"id":"stable-diffusion-v1-5","name":"Stable Diffusion v1.5","inputCost":0,"outputCost":0,"perImageCost":0.02},{"id":"stable-diffusion-xl","name":"Stable Diffusion XL","inputCost":0,"outputCost":0,"perImageCost":0.04}]},{"id":"flux","name":"Flux","models":[{"id":"flux-v1","name":"Flux v1","inputCost":0,"outputCost":0,"perImageCost":0.015}]}]'),d=JSON.parse('[{"id":"generate-content","name":"Generate Content","description":"Generate new content from a prompt in the Weka Editor AI Assistant","defaultModel":"default","audience":"admin","usage":{"requestType":"daily","defaultRequests":40,"defaultActiveUsers":4},"tokens":{"input":{"min":120,"max":120},"output":{"min":800,"max":1600}}},{"id":"summarize-content","name":"Summarise Content","description":"Summarize existing content in the Weka Editor AI Assistant","defaultModel":"default","audience":"admin","usage":{"requestType":"daily","defaultRequests":40,"defaultActiveUsers":4},"tokens":{"base":50,"input":{"min":1400,"max":2800},"output":{"min":120,"max":200}}},{"id":"summarize-file","name":"Summarise File Content","description":"Summarize uploaded file content in the Weka Editor AI Assistant","defaultModel":"default","audience":"admin","usage":{"requestType":"daily","defaultRequests":5,"defaultActiveUsers":4},"tokens":{"input":{"min":5000,"max":15000},"output":{"min":500,"max":1000}}},{"id":"localize-text","name":"Localise Text","description":"Translate custom elements within a Totara installation","defaultModel":"default","audience":"admin","usage":{"requestType":"monthly","defaultRequests":100,"defaultActiveUsers":4},"tokens":{"base":200,"input":{"min":120,"max":800},"output":{"min":800,"max":4000}}},{"id":"image-generation","name":"Image Generation","description":"Generate images from text prompts","defaultModel":"gpt-image-1","audience":"admin","usage":{"requestType":"monthly","defaultRequests":5,"defaultActiveUsers":400},"tokens":{"input":{"min":120,"max":800},"output":{"min":0,"max":0}}},{"id":"knowledge-checkin","name":"Knowledge Check-in Generator","description":"Generate quizzes from content for reinforcement learning","defaultModel":"default","audience":"admin","usage":{"requestType":"monthly","defaultRequests":5,"defaultActiveUsers":4},"tokens":{"input":{"min":5000,"max":10000},"output":{"min":3000,"max":3000}}},{"id":"goal-generator","name":"Goal Generator","description":"Generate SMART goals from user responses","defaultModel":"default","audience":"user","usage":{"requestType":"monthly","defaultRequests":5,"defaultActiveUsers":1000},"tokens":{"input":{"min":500,"max":500},"output":{"min":200,"max":200}}}]'),u=()=>{let e={};return d.forEach(t=>{e[t.id]={selectedModel:t.defaultModel,requests:t.usage.defaultRequests,activeUsers:t.usage.defaultActiveUsers,enabled:!0,..."user"===t.audience||"both"===t.audience?{useSystemUserCount:!0}:{},..."admin"===t.audience?{useSystemAdminCount:!0}:{},activeUsersMode:"admin"===t.audience?"admin":"user"}}),{adminCount:4,userCount:1e3,daysPerMonth:22,selectedGlobalModel:"gpt-4o",interactionSettings:e}},p=e=>{for(let t of m){let n=t.models.find(t=>t.id===e);if(n)return{provider:t,model:n}}return null},x=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),g=e=>d.filter(t=>{var n;return(null==(n=e.interactionSettings[t.id])?void 0:n.enabled)!==!1}).map(t=>{let n,a,s,o=e.interactionSettings[t.id],i=o.selectedModel||e.selectedGlobalModel;"default"===i&&(i=e.selectedGlobalModel);let r=p(i);if(!r)throw Error("Model ".concat(i," not found"));let{model:l}=r,c="daily"===t.usage.requestType?o.requests*e.daysPerMonth:o.requests;n="admin"===o.activeUsersMode?e.adminCount:"user"===o.activeUsersMode?e.userCount:o.activeUsers;let m=t.tokens.base||0,d=(m+t.tokens.input.min)*c*n,u=(m+t.tokens.input.max)*c*n,x=t.tokens.output.min*c*n,g=t.tokens.output.max*c*n;return"number"==typeof l.perImageCost&&l.perImageCost>0?a=s=c*n*l.perImageCost:(a=d*l.inputCost/1e3+x*l.outputCost/1e3,s=u*l.inputCost/1e3+g*l.outputCost/1e3),{interactionId:t.id,interactionName:t.name,modelName:l.name,monthlyRequestCount:c*n,inputTokens:{min:d,max:u},outputTokens:{min:x,max:g},cost:{min:a,max:s}}}),h=e=>e.reduce((e,t)=>({min:e.min+t.cost.min,max:e.max+t.cost.max}),{min:0,max:0}),y=e=>{let{results:t}=e,n=t.reduce((e,t)=>({min:e.min+t.cost.min,max:e.max+t.cost.max}),{min:0,max:0});return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Cost Calculation Results"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Interaction"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Model"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Monthly Requests"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Input Tokens"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Output Tokens"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Monthly Cost"})]})}),(0,a.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[t.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.interactionName}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.modelName}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.monthlyRequestCount.toLocaleString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.inputTokens.min===e.inputTokens.max?e.inputTokens.min.toLocaleString():"".concat(e.inputTokens.min.toLocaleString()," - ").concat(e.inputTokens.max.toLocaleString())}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.outputTokens.min===e.outputTokens.max?e.outputTokens.min.toLocaleString():"".concat(e.outputTokens.min.toLocaleString()," - ").concat(e.outputTokens.max.toLocaleString())}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:e.cost.min===e.cost.max?x(e.cost.min):"".concat(x(e.cost.min)," - ").concat(x(e.cost.max))})]},e.interactionId)),(0,a.jsxs)("tr",{className:"bg-gray-50",children:[(0,a.jsx)("td",{colSpan:5,className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 text-right",children:"Total Monthly Cost:"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900",children:n.min===n.max?x(n.min):"".concat(x(n.min)," - ").concat(x(n.max))})]})]})]})})]})};var f=n(9911);let b=e=>{let{totalCost:t,results:n}=e,s=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),i=Math.max(...n.map(e=>e.cost.max));return(0,a.jsxs)("div",{className:"rounded-lg shadow-md p-6 mb-6",style:{background:o.summaryBg},children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",style:{color:o.summaryText},children:"Cost Summary"}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[(0,a.jsxs)("div",{className:"text-center md:text-left mb-4 md:mb-0",children:[(0,a.jsx)("p",{className:"text-sm",style:{color:o.summaryText,opacity:.7},children:"Estimated Monthly Cost"}),(0,a.jsx)("p",{className:"text-3xl font-bold",style:{color:o.summaryAccent},children:t.min===t.max?s(t.min):"".concat(s(t.min)," - ").concat(s(t.max))})]}),(0,a.jsx)("div",{className:"p-4 rounded-lg shadow-sm max-w-md",style:{background:o.white},children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)(f.__w,{className:"mt-1 mr-2 flex-shrink-0",style:{color:o.summaryAccent}}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"text-sm",style:{color:o.summaryText,opacity:.7},children:"This estimate is based on current model pricing and your configured usage patterns. Actual costs may vary based on real-world usage and any pricing changes from providers."})})]})})]}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h3",{className:"text-md font-semibold mb-2",style:{color:o.summaryText},children:"Cost Breakdown"}),(0,a.jsx)("div",{className:"space-y-2",children:n.map(e=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"w-48 truncate text-sm font-medium",style:{color:o.summaryText},children:e.interactionName}),(0,a.jsx)("div",{className:"flex-1 mx-2 bg-gray-200 rounded-full h-2 relative",children:(0,a.jsx)("div",{className:"bg-black h-2 rounded-full",style:{width:"".concat(i>0?e.cost.max/i*100:0,"%")}})}),(0,a.jsx)("span",{className:"text-sm font-medium ml-2",style:{minWidth:60,color:o.summaryText},children:e.cost.min===e.cost.max?s(e.cost.max):"".concat(s(e.cost.min)," - ").concat(s(e.cost.max))})]},e.interactionName))})]})]})};var C=n(6597),v=n(6118);let N=e=>{let t=e.reduce((e,t)=>({min:e.min+t.cost.min,max:e.max+t.cost.max}),{min:0,max:0}),n="Interaction,Model,Monthly Requests,Input Tokens,Output Tokens,Monthly Cost\n";e.forEach(e=>{let t=e.inputTokens.min===e.inputTokens.max?e.inputTokens.min.toLocaleString():"".concat(e.inputTokens.min.toLocaleString()," - ").concat(e.inputTokens.max.toLocaleString()),a=e.outputTokens.min===e.outputTokens.max?e.outputTokens.min.toLocaleString():"".concat(e.outputTokens.min.toLocaleString()," - ").concat(e.outputTokens.max.toLocaleString()),s=e.cost.min===e.cost.max?x(e.cost.min):"".concat(x(e.cost.min)," - ").concat(x(e.cost.max));n+='"'.concat(e.interactionName,'","').concat(e.modelName,'",').concat(e.monthlyRequestCount.toLocaleString(),',"').concat(t,'","').concat(a,'","').concat(s,'"\n')});let a=t.min===t.max?x(t.min):"".concat(x(t.min)," - ").concat(x(t.max)),s=new Blob([n+='"TOTAL","","","","","'.concat(a,'"\n')],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(s),i=document.createElement("a");i.setAttribute("href",o),i.setAttribute("download","totara_ai_cost_calculation.csv"),document.body.appendChild(i),i.click(),document.body.removeChild(i)},j=e=>{let t=e.reduce((e,t)=>({min:e.min+t.cost.min,max:e.max+t.cost.max}),{min:0,max:0}),n=new C.uE;n.setFontSize(18),n.text("Totara LMS AI Cost Calculator Results",14,22),n.setFontSize(10),n.text("Generated on: ".concat(new Date().toLocaleDateString()),14,30);let a=e.map(e=>[e.interactionName,e.modelName,e.monthlyRequestCount.toLocaleString(),e.inputTokens.min===e.inputTokens.max?e.inputTokens.min.toLocaleString():"".concat(e.inputTokens.min.toLocaleString()," - ").concat(e.inputTokens.max.toLocaleString()),e.outputTokens.min===e.outputTokens.max?e.outputTokens.min.toLocaleString():"".concat(e.outputTokens.min.toLocaleString()," - ").concat(e.outputTokens.max.toLocaleString()),e.cost.min===e.cost.max?x(e.cost.min):"".concat(x(e.cost.min)," - ").concat(x(e.cost.max))]);a.push(["TOTAL","","","","",t.min===t.max?x(t.min):"".concat(x(t.min)," - ").concat(x(t.max))]),(0,v.Ay)(n,{head:[["Interaction","Model","Monthly Requests","Input Tokens","Output Tokens","Monthly Cost"]],body:a,startY:40,styles:{fontSize:8},headStyles:{fillColor:[41,82,163]},alternateRowStyles:{fillColor:[240,240,240]},footStyles:{fillColor:[220,220,220]}}),n.save("totara_ai_cost_calculation.pdf")},k=()=>{let e=new Blob([JSON.stringify({modelProviders:m,interactions:d},null,2)],{type:"application/json"}),t=URL.createObjectURL(e),n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download","ai-cost-settings.json"),document.body.appendChild(n),n.click(),document.body.removeChild(n)},w=(e,t)=>{"csv"===t?N(e):j(e)};function S(){let[e,t]=(0,s.useState)(u()),[n,o]=(0,s.useState)([]),[i,p]=(0,s.useState)({min:0,max:0});(0,s.useEffect)(()=>{let e=localStorage.getItem("aiCostCalculatorSettings");if(e)try{let n=JSON.parse(e);t(n)}catch(e){console.error("Failed to parse saved settings:",e)}},[]),(0,s.useEffect)(()=>{try{let t=g(e);o(t),p(h(t)),localStorage.setItem("aiCostCalculatorSettings",JSON.stringify(e))}catch(e){console.error("Error calculating costs:",e)}},[e]);let x=(e,n)=>{t(t=>({...t,interactionSettings:{...t.interactionSettings,[e]:{...t.interactionSettings[e],selectedModel:n}}}))},f=(e,n)=>{t(t=>({...t,interactionSettings:{...t.interactionSettings,[e]:{...t.interactionSettings[e],requests:n}}}))},C=(e,n)=>{t(t=>({...t,interactionSettings:{...t.interactionSettings,[e]:{...t.interactionSettings[e],activeUsers:n,useSystemUserCount:!1,useSystemAdminCount:!1}}}))},v=(e,n)=>{t(t=>{let a={...t},s=a.interactionSettings[e];return s.activeUsersMode=n,"admin"===n?s.activeUsers=a.adminCount:"user"===n&&(s.activeUsers=a.userCount),a})},N=(e,n,a,s)=>{t(t=>{var o,i,r;let l=null==(o=d.find(t=>t.id===e))?void 0:o.tokens,c=(null==(i=t.interactionSettings[e])?void 0:i.tokens)||{};return"base"===n?{...t,interactionSettings:{...t.interactionSettings,[e]:{...t.interactionSettings[e],tokens:{...c,base:a,input:c.input||(null==l?void 0:l.input)||{min:0,max:0},output:c.output||(null==l?void 0:l.output)||{min:0,max:0}}}}}:{...t,interactionSettings:{...t.interactionSettings,[e]:{...t.interactionSettings[e],tokens:{base:null!=(r=c.base)?r:null==l?void 0:l.base,input:"input"===n?{min:a,max:s}:c.input||(null==l?void 0:l.input)||{min:0,max:0},output:"output"===n?{min:a,max:s}:c.output||(null==l?void 0:l.output)||{min:0,max:0}}}}}})};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,a.jsx)(r,{onExportSettings:k,onExportResults:()=>{w(n,"csv")},onReset:()=>{let e=u();t(e),localStorage.setItem("aiCostCalculatorSettings",JSON.stringify(e))}}),(0,a.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 mb-6",children:[(0,a.jsx)("div",{className:"w-full md:w-2/3",children:(0,a.jsx)(b,{totalCost:i,results:n.map(e=>({interactionName:e.interactionName,cost:e.cost}))})}),(0,a.jsx)("div",{className:"w-full md:w-1/3",children:(0,a.jsx)(l,{adminCount:e.adminCount,userCount:e.userCount,daysPerMonth:e.daysPerMonth,selectedGlobalModel:e.selectedGlobalModel,modelProviders:m,onAdminCountChange:e=>{t(t=>({...t,adminCount:e}))},onUserCountChange:e=>{t(t=>{let n={...t,userCount:e};return n.interactionSettings["goal-generator"]&&(n.interactionSettings["goal-generator"].activeUsers=e),n})},onDaysPerMonthChange:e=>{t(t=>({...t,daysPerMonth:e}))},onGlobalModelChange:e=>{t(t=>({...t,selectedGlobalModel:e}))}})})]}),(0,a.jsx)(y,{results:n}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"AI Interactions"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:d.map(n=>{var s,o,i,r,l,d,u;let p=(null==(s=e.interactionSettings[n.id])?void 0:s.tokens)||n.tokens,g=(null==(o=e.interactionSettings[n.id])?void 0:o.enabled)!==!1,h=(null==(i=e.interactionSettings[n.id])?void 0:i.activeUsersMode)||("admin"===n.audience?"admin":"user"),y=(null==(r=e.interactionSettings[n.id])?void 0:r.activeUsers)||0;"admin"===h?y=e.adminCount:"user"===h&&(y=e.userCount);let b=e.selectedGlobalModel,j=(Array.isArray(m)?m:[]).flatMap(e=>Array.isArray(e.models)?e.models.map(t=>({id:t.id,name:"".concat(e.name," - ").concat(t.name)})):[]).find(e=>e.id===b),k=j?j.name:"undefined",w=null!=(u=null==(l=e.interactionSettings[n.id])?void 0:l.selectedModel)?u:"default";return(0,a.jsx)(c,{interaction:n,modelProviders:m,selectedModel:w,globalModelName:k,requests:(null==(d=e.interactionSettings[n.id])?void 0:d.requests)||0,activeUsers:y,tokens:p,enabled:g,activeUsersMode:h,onToggleEnabled:()=>t(e=>({...e,interactionSettings:{...e.interactionSettings,[n.id]:{...e.interactionSettings[n.id],enabled:!g}}})),onModelChange:e=>x(n.id,e),onRequestsChange:e=>f(n.id,e),onActiveUsersChange:e=>C(n.id,e),onActiveUsersModeChange:e=>v(n.id,e),onTokensChange:N},n.id)})})]})]}),(0,a.jsx)("footer",{className:"bg-gray-800 text-white py-6",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 text-center",children:[(0,a.jsx)("p",{children:"Totara LMS AI Cost Calculator"}),(0,a.jsx)("p",{className:"text-sm mt-2 text-gray-400",children:"Pricing data is approximate and subject to change. Always verify with the model provider."})]})})]})}},2243:(e,t,n)=>{Promise.resolve().then(n.bind(n,401))}},e=>{var t=t=>e(e.s=t);e.O(0,[711,930,652,441,684,358],()=>t(2243)),_N_E=e.O()}]);